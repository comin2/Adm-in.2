var Admin2={html:document.documentElement,body:document.body,topbar:document.getElementById("topbar"),sidebar:document.getElementById("sidebar"),main:document.getElementById("main"),config:{max_toasts_number:5}};if(Admin2.sidebar){Admin2.html.classList.add("has-sidebar"),Admin2.sidebar_toogle_btn=document.createElement("button"),Admin2.sidebar_toogle_btn.setAttribute("type","button"),Admin2.sidebar_toogle_btn.id="sidebar-toggle",Admin2.main_overlay=document.createElement("div"),Admin2.main_overlay.id="main-overlay",Admin2.main.nextSibling?Admin2.main.parentNode.insertBefore(Admin2.main_overlay,Admin2.main.nextSibling):Admin2.main.parentNode.appendChild(Admin2.main_overlay),Admin2.body.insertBefore(Admin2.sidebar_toogle_btn,Admin2.sidebar)&&(window.matchMedia("(max-width: 60em)").matches?(Admin2.sidebar.setAttribute("hidden",!0),Admin2.sidebar.setAttribute("aria-hidden",!0),Admin2.sidebar_toogle_btn.title="Show the sidebar",Admin2.html.classList.add("sidebar-hidden")):Admin2.sidebar_toogle_btn.title="Hide the sidebar"),Admin2.sidebar_search_form=document.getElementById("sidebar-search-form"),Admin2.sidebar_search_input=document.getElementById("sidebar-search-input"),Admin2.sidebar_menu_titles=Admin2.sidebar.getElementsByClassName("menu-title"),Admin2.sidebar_header=document.getElementById("sidebar-header"),Admin2.sidebar_header.title="Afficher/Cacher le menu latéral";for(var i=0,nb=Admin2.sidebar_menu_titles.length;nb>i;i++){var toggle_btn=document.createElement("button");toggle_btn.type="button",toggle_btn.className="menu-toggle";for(var elem=Admin2.sidebar_menu_titles[i];(!elem.classList||!elem.classList.contains("menu-content"))&&elem.nextSibling;)elem=elem.nextSibling;elem.getAttribute("hidden")?(toggle_btn.textContent="+",toggle_btn.title="Show the content of this menu"):(toggle_btn.textContent="-",toggle_btn.title="Hide the content of this menu"),Admin2.sidebar_menu_titles[i].insertBefore(toggle_btn,Admin2.sidebar_menu_titles[i].firstElementChild),Admin2.sidebar_menu_titles[i].appendChild(toggle_btn)}}Admin2.html.classList.add("js-enabled"),Admin2.onDocumentClick=function(t){if("sidebar-toggle"===t.target.id)return t.stopPropagation(),Admin2.sidebar.getAttribute("hidden")?(Admin2.sidebar.removeAttribute("hidden"),Admin2.sidebar.removeAttribute("aria-hidden"),Admin2.sidebar_toogle_btn.title="Hide the sidebar",Admin2.html.classList.remove("sidebar-hidden")):(Admin2.sidebar.setAttribute("hidden",!0),Admin2.sidebar.setAttribute("aria-hidden",!0),Admin2.sidebar_toogle_btn.title="Show the sidebar",Admin2.html.classList.add("sidebar-hidden")),(t.x||t.y)&&t.target.blur(),!0;if(t.target.classList.contains("menu-toggle")){t.stopPropagation();for(var e=t.target.parentNode;(!e.classList||!e.classList.contains("menu-content"))&&e.nextSibling;)e=e.nextSibling;return e.classList.contains("menu-content")?(e.getAttribute("hidden")||e.getAttribute("aria-hidden")?(e.removeAttribute("hidden"),e.removeAttribute("aria-hidden"),t.target.textContent="-",t.target.title="Hide the content of this menu"):(e.setAttribute("hidden",!0),e.setAttribute("aria-hidden",!0),t.target.textContent="+",t.target.title="Show the content of this menu"),(t.x||t.y)&&t.target.blur(),!0):!1}},document.addEventListener("click",Admin2.onDocumentClick,!1),Admin2.ajax=function(){this.url="string"==typeof arguments[0]?arguments[0]:arguments[0].url,this.postData=arguments[1]&&"string"==typeof arguments[1]?arguments[1]:arguments[1]&&"object"==typeof arguments[1]?arguments[1]:arguments[0].data||null,this.successCallback=this.postData&&arguments[2]&&"function"==typeof arguments[2]?arguments[2]:!this.postData&&arguments[1]&&"function"==typeof arguments[1]?arguments[1]:arguments[0].success||null,this.errorCallback=this.postData&&"function"==typeof arguments[3]?arguments[3]:!this.postData&&arguments[2]&&"function"==typeof arguments[2]?arguments[2]:arguments[0].error||null,this.postData&&"boolean"==typeof arguments[4]||void 0!=arguments[0].cache?(this.date=new Date,this.timestamp=this.date.getTime(),this.cache="boolean"==arguments[4]||arguments[0].cache):!this.postData&&"boolean"==typeof arguments[3]||void 0!=arguments[0].cache?(this.date=new Date,this.timestamp=this.date.getTime(),this.cache="boolean"==arguments[3]||arguments[0].cache):this.cache=!0;var t=new XMLHttpRequest;return t.onreadystatechange=function(t){4==this.readyState&&200==this.status?this._successCallback&&this._successCallback(t):4==this.readyState&&(console.dir(this),this._errorCallback&&this._errorCallback(t))},t._successCallback=this.successCallback||null,t._errorCallback=this.errorCallback||null,this.postData?(t.open("POST",this.url+(this.cache?"":"?timestamp="+this.timestamp),!0),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send("string"==typeof this.postData?this.postData:objectToQueryString(this.postData))):(t.open("GET",this.url+(this.cache?"":"?timestamp="+this.timestamp),!0),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send()),this},Admin2.Draggables={handleDragStart:function(t){return t.target.draggable?void t.target.classList.add("dragged"):!1},handleDragEnd:function(t){return t.target.draggable?void t.target.classList.remove("dragged"):!1}},document.addEventListener("dragstart",Admin2.Draggables.handleDragStart,!1),document.addEventListener("dragend",Admin2.Draggables.handleDragEnd,!1),Admin2.Sortable=function(t,e,i,n){if(this.elemParent="String"===t.constructor.name?document.querySelector(t):t,!this.elemParent)throw"Invalid parent element";if(this.selectorChildren=e,this.elemsChildren="String"===e.constructor.name?this.elemParent.querySelectorAll(e):e,!this.elemsChildren||!this.elemsChildren.length)throw"No children found";this.onOrderChange=i,this.currentDraggedElement=null,Array.prototype.forEach.call(this.elemsChildren,function(t){t.setAttribute("draggable",!0),t.addEventListener("dragstart",this.onChildDragStart.bind(this,t),!1),t.addEventListener("drag",this.onChildDrag.bind(this,t),!1),t.addEventListener("dragend",this.onChildDragEnd.bind(this,t),!1),t.addEventListener("dragenter",this.onChildDragEnter.bind(this,t),!1),t.addEventListener("dragleave",this.onChildDragLeave.bind(this,t),!1)},this),n&&n.call(this,this.elemsChildren)},Admin2.Sortable.prototype.onChildDragStart=function(t){this.currentDraggedElement=t,t.classList.add("dragged")},Admin2.Sortable.prototype.onChildDrag=function(){},Admin2.Sortable.prototype.onChildDragEnd=function(t){this.currentDraggedElement=null,t.classList.remove("dragged")},Admin2.Sortable.prototype.onChildDragEnter=function(t){if(this.currentDraggedElement){var e=Array.prototype.indexOf.call(t.parentNode.childNodes,t),i=Array.prototype.indexOf.call(this.currentDraggedElement.parentNode.childNodes,this.currentDraggedElement);i>e?t.parentNode.insertBefore(this.currentDraggedElement,t):t.parentNode.insertBefore(this.currentDraggedElement,t.nextElementSibling),this.elemsChildren="String"===this.selectorChildren.constructor.name?this.elemParent.querySelectorAll(this.selectorChildren):this.selectorChildren,this.onOrderChange&&this.onOrderChange(this.elemsChildren)}},Admin2.Sortable.prototype.onChildDragLeave=function(){},Array.prototype.forEach.call(document.querySelectorAll("ul.sortable"),function(t){new Admin2.Sortable(t,"li",function(t){Array.prototype.forEach.call(t,function(t,e){t.dataset.order=e})})}),Admin2.Tabs={setAllTabs:function(){Array.prototype.forEach.call(document.getElementsByClassName("tabs-container"),Admin2.Tabs.setSingleTabs)},setSingleTabs:function(t){Array.prototype.forEach.call(t.querySelectorAll(".tabs-names>a"),function(t,e){return t.addEventListener("click",Admin2.Tabs.showTab.bind(t,t.getAttribute("href")),!1),e>0?(t.classList.remove("tab-active"),void t.classList.add("tab-inactive")):(t.classList.remove("tab-inactive"),void t.classList.add("tab-active"))}),Array.prototype.forEach.call(t.getElementsByClassName("tab-content"),function(t,e){return e>0?(t.classList.remove("tab-active"),void t.classList.add("tab-inactive")):(t.classList.remove("tab-inactive"),void t.classList.add("tab-active"))})},showTab:function(t,e){var i=document.querySelector(t);if(!i)throw new TypeError("Tab not found");var n=i.parentNode;e&&(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()),Array.prototype.forEach.call(n.querySelectorAll(".tabs-names>a"),function(e){return e.getAttribute("href")!==t?(e.classList.remove("tab-active"),void e.classList.add("tab-inactive")):(e.classList.remove("tab-inactive"),void e.classList.add("tab-active"))}),Array.prototype.forEach.call(n.getElementsByClassName("tab-content"),function(t){return t!==i?(t.classList.remove("tab-active"),void t.classList.add("tab-inactive")):(t.classList.remove("tab-inactive"),void t.classList.add("tab-active"))})}},Admin2.Tabs.setAllTabs(),Admin2.TextEditor=function(t,e){"undefined"==typeof e&&(e={}),"string"==typeof e.baseURL&&(this.baseURL=e.baseURL),"array"==typeof e.buttons&&(this.buttons=e.buttons),"string"==typeof e.buttonsClassName?this.buttonsClassName=e.buttonsClassName:"array"==typeof e.buttonsClassName&&(this.buttonsClassName=e.buttonsClassName.join(" ")),this.textarea=t,this.buttons&&(this.buttonsArea=document.createElement("div"),this.buttonsArea.className="editor-options",this.textarea.parentNode.insertBefore(this.buttonsArea,this.textarea),this.buttons.forEach(function(t){var e=document.createElement("button");this.buttonsClassName&&(e.className=this.buttonsClassName),t.className&&e.classList.add.apply(e.classList,t.className.split(" ")),t.title&&(e.title=t.title),e.innerHTML=t.content,e.addEventListener("click",function(t,e,i){i.preventDefault(),e.command&&document.execCommand(e.command,!1,null),e.customCommand&&e.customCommand.call(this,e),this.baseURL?(this.editorArea.innerHTML=this.setURLs(),this.textarea.value=this.reverseURLs()):this.textarea.value=this.editorArea.innerHTML}.bind(this,e,t),!1),this.buttonsArea.appendChild(e),this.buttonsArea.appendChild(document.createTextNode(" "))},this)),this.editorArea=document.createElement("pre"),this.editorArea.className=this.textarea.className,this.editorArea.contentEditable=!0,this.editorArea.style.minHeight=this.textarea.offsetHeight+"px",this.editorArea.innerHTML=this.textarea.value,this.textarea.parentNode.insertBefore(this.editorArea,this.textarea);try{document.execCommand("styleWithCSS",!1,!1)}catch(i){}return this.baseURL&&(this.setURLs=function(){return this.editorArea.innerHTML.replace(new RegExp('(src|href)="([^http|https|ftp|//][^"]+)"',"gi"),'$1="'+this.baseURL+'$2"')},this.reverseURLs=function(){return this.editorArea.innerHTML.replace(new RegExp('(src|href)="'+this.baseURL+'([^"]+)"',"gi"),'$1="$2"')},this.editorArea.addEventListener("input",function(){this.textarea.value=this.reverseURLs()}.bind(this),!1),this.editorArea.innerHTML=this.setURLs()),this.textarea.classList.add("hidden"),this},Admin2.TextEditor.prototype.buttons=[{content:"B",className:"bold",title:"Toggle bold",command:"bold"},{content:"I",className:"italic",title:"Toggle italic",command:"italic"},{content:"²",className:"superscript",title:"Toggle superscript",command:"superscript"},{content:"₂",className:"subscript",title:"Toggle subscript",command:"subscript"},{content:"img",className:"img",title:"Insert an image",customCommand:function(){var t;do t=prompt("Image URL","http://");while(""===t);"string"==typeof t&&document.execCommand("insertImage",!1,t)}},{content:"×",className:"removeFormat",title:"Remove all formatting",command:"removeFormat"}],Array.prototype.forEach.call(document.querySelectorAll("textarea.text-editor"),function(t){new Admin2.TextEditor(t)}),Admin2.toasts_container=document.createElement("div"),Admin2.toasts_container.id="toasts-container",Admin2.body.appendChild(Admin2.toasts_container),Admin2.toasts=[],Admin2.Toast=function(t,e,i){if(t){if(this.message=t,this.duration=e||Admin2.Toast.DURATION_MEDIUM,this._element=document.createElement("div"),this._element.classList.add("toast"),this.options=i||{},this.options.className&&("string"==typeof i.className&&(i.className=i.className.split(" ")),this._element.classList.add.apply(this._element.classList,i.className)),this.options.style)if("string"==typeof this.options.style)this._element.style.cssText=this.options.style;else for(var n in this.options.style)this._element.style[n]=this.options.style[n];for(this._content_element=document.createElement("p"),this._content_element.textContent=this.message,this._element.appendChild(this._content_element);Admin2.toasts_container.children.length>Admin2.config.max_toasts_number;)Admin2.toasts_container.removeChild(Admin2.toasts_container.firstChild);return Admin2.toasts_container.appendChild(this._element),this.dismiss=function(){return this._dismissTimeout&&clearTimeout(this._dismissTimeout),this._element.classList.add("dismissed"),setTimeout(function(t){return function(){Admin2.toasts_container.removeChild(t._element),t.options.callback&&t.options.callback();var e=Admin2.toasts.indexOf(t);-1!==e&&Admin2.toasts.splice(e,1)}}(this),Admin2.Toast.TRANSITION_TIME),!0},setTimeout(function(t){return function(){t._element.addEventListener("click",function(t){return function(){t.dismiss()}}(t),!1),t._dismissTimeout=setTimeout(function(t){return function(){t.dismiss()}}(t),t.duration)}}(this),Admin2.Toast.TRANSITION_TIME),Admin2.toasts.push(this),this}},"number"!=typeof Admin2.Toast.TRANSITION_TIME&&(Admin2.Toast.TRANSITION_TIME=200),Admin2.Toast.DURATION_SHORT=1e3,Admin2.Toast.DURATION_MEDIUM=3e3,Admin2.Toast.DURATION_LONG=5e3,"webkitSpeechRecognition"in window?(Admin2.voiceRecognition=new webkitSpeechRecognition,Admin2.voiceRecognition.continuous=!0,Admin2.voiceRecognition.interimResults=!0,Admin2.voiceRecognition.lang=Admin2.html.lang||navigator.language,Admin2.voiceRecognition.onstart=function(){console.log("I am listening…"),Admin2.voiceRecognition.onresult=function(t){interim_transcript="";for(var e=t.resultIndex,i=t.results.length;i>e;++e)interim_transcript+=t.results[e][0].transcript,t.results[e]&&t.results[e].isFinal&&(console.log("Final word"),processSpeech(interim_transcript))},Admin2.voiceRecognition.onerror=function(){}},Admin2.voiceRecognition.onend=function(t){console.log(t),console.log("Goodbye")},Admin2.activateVoicePlugin&&Admin2.voiceRecognition.start(),"object"!=typeof Admin2.SPEECH_KEYWORDS&&(Admin2.SPEECH_KEYWORDS={}),"object"!=typeof SPEECH_PROCESSES&&(Admin2.SPEECH_PROCESSES={}),Admin2.SPEECH_KEYWORDS.search=new RegExp(/^(search(ing)?|looking for) /gi),Admin2.SPEECH_PROCESSES.search=function(t){return console.log('Search: "'+t+'"'),t?(sidebar_search_input.value="",sidebar_search_input.value=t,void sidebar_search_form.submit()):!1},Admin2.processSpeech=function(t){var e;t=t.trim(),console.log("Process speech : "+t);for(var i in Admin2.SPEECH_KEYWORDS)e=t.match(Admin2.SPEECH_KEYWORDS[i]),console.dir(e),e&&Admin2.SPEECH_PROCESSES[i](t.replace(e[0],"").trim(),e[0],Admin2.SPEECH_KEYWORDS[i])}):console.error("Your browser doesn't support speech recognition. That‘s too bad…");